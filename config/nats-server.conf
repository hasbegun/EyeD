# NATS server configuration — Phase 1 (local dev, no TLS)
# TLS + per-service JWT auth will be added in Phase 6 (Security)

listen: 0.0.0.0:4222
http: 0.0.0.0:8222

max_payload: 8MB   # Allow large JPEG frames (~30KB typical, 8MB max)
write_deadline: 30s  # iris-engine needs ~600ms/frame on CPU; prevent slow consumer disconnects

# Authorization stubs — uncomment in Phase 6
# authorization {
#     users = [
#         { user: "gateway",     password: "$GATEWAY_PASS",
#           permissions: { publish: ["eyed.analyze", "eyed.enroll"], subscribe: ["eyed.result"] } },
#         { user: "iris-engine", password: "$ENGINE_PASS",
#           permissions: { publish: ["eyed.result", "eyed.archive"], subscribe: ["eyed.analyze", "eyed.enroll", "eyed.templates.>"] } },
#         { user: "storage",     password: "$STORAGE_PASS",
#           permissions: { publish: [], subscribe: ["eyed.archive", "eyed.enroll"] } },
#     ]
# }
